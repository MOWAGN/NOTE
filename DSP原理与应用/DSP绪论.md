# DSP绪论
## 数字信号处理概述
- 数字信号处理（简称DSP）。
- 数字信号处理是利用计算机或专用处理设备，以数字的形式对信号进行分析、采集、合成、变换、滤波、估算、压缩、识别等加工处理，以便提取有用的信息并进行有效的传输与应用。
- DSP可以代表数字信号处理技术（Digital SignalProcessing) ，也可以代表数字信号处理器（DigitalSignal Processor）。
    - 前者是理论和计算方法上的技术
    - 后者是指实现这些技术的通用或专用可编程微处理器芯片。
- DSP包括两个方面内容：
    - 算法的研究
        - 算法研究是指如何以最小的运算量和存储器的使用量来完成指定任务
    - 数字信号处理的实现
        - 数字信号处理的实现是用硬件、软件或软硬结合的方法来实现各种算法。数字信号处理的实现一般有以下几种方法:
            1. 在通用计算机(PC机）上用软件（如Fortran、c语言〉实现，但速度慢，不适合实时数字信号处理，只用于算法的模拟；
            2. 在通用计算机系统中加入专用的加速处理机实现。用以增强运算能力和提高运算速度。不适合于嵌入式应用。专用性强。应用受到限制；
            3. 用单片机实现，用于不太复杂的数字信号处理。不适合于以乘法-累加运算为主的密集型DSP算法；
            4. 用通用的可编程DSP芯片实现。具有可编程性和强大的处理能力，可完成复杂的数字信号处理的算法,在实时DSP领域中处于主导地位；
            5. 用专用的DSP芯片实现，可用在要求信号处理速度极快的特殊场合，如专用于FFT、数字滤波、卷积、相关算法的DSP芯片，相应的信号处理算法由内部硬件电路实现。用户无需编程，但专用性强,应用受到限制；
            6. 用基于通用DSP核的ASIC心片实现。随着专用集成电路ASIC(Application Specific Integrated Circuit)的广泛使用,可以将DSP的功能集成到ASIC中。一般说来，DSP核是通用DSP器件中的CPU部分，再配上用户所需的存储器(包括Cache、RAM、ROM、flash、EPROM)和外设(包括串口、并口、主机接口、DMA、定时器等)，组成用户的ASIC。

## 可编程DSP芯片
- 数字信号处理器(DSP）是一种特别适合于进行数字信号处理运算的微处理器，主要用于实时快速实现各种数字信号处理的算法。

### DSP芯片发展
- 第一阶段
- 第二阶段——成熟（1990年前后）
    - 这个时期的DSP器件在硬件结构上更适合数字信号处理的要求，能进行硬件乘法、硬件FFT变换和单指令滤波处理，其单指令周期为80~100ns.
    - 如TI公司的TMS320C20，它是该公司的第二代DSP器件
- 第三阶段——完善（2000年后）
    - 这一时期的DSP运算速度可达到单指令周期10ns左右,可在Windows环境下直接用c语言编程，使用方便灵活，使DSP芯片不仅在通信、计算机领域得到了广泛的应用，而且逐渐渗透到人们日常消费领域。
- 目前
    - 硬件方面主要是向多处理器的并行处理结构、便于外部数据交换的串行总线传输、大容量片上RAM和ROM、程序加密、增加/o驱动能力、外围电路内装化、低功耗等方面发展。
    - 软件方面主要是综合开发平台的完善，使DSP的应用开发更加灵活方便。

### DSP芯片特点
- 数字信号处理不同于普通的科学计算与分析，它强调运算的实时性。除了具备普通微处理器所强调的高速运算和控制能力外，针对实时数字信号处理的特点，在处理器的结构、指令系统、指令流程上作了很大的改进，其主要特点如下：
    1. **采用（改进型）哈佛结构**
         - 哈佛结构采用双存储空间，程序存储器和数据存储器分开，有各自独立的程序总线和数据总线，可独立编址和独立访问，可对程序和数据进行独立传输，使取指令操作、指令执行操作、数据吞吐并行完成，大大地提高了数据处理能力和指令的执行速度，非常适合于实时的数字信号处理。
            - 哈佛结构示意图
            - ![](vx_images/488790020225737.png =400x)
         - 冯·诺伊曼结构采用单存储空间（程序指令和数据共用），使用单一地址和数据总线。
            - 当进行高速运行时，不能同时取指令和取操作数，造成数据传输通道的瓶颈现象，工作速度较慢
            - ![](vx_images/421665819225128.png =400x)
        - 🐖 改进型哈佛结构
            - 改进型的哈佛结构是采用双存储空间和数条总线，即一条程序总线和多条数据总线。其特点如下：
                1. 允许在程序空间和数据空间之间相互传送数据，使这些数据可以由算术运算指令 **直接调用** ，增强芯片的灵活性；
                2. 提供了存储指令的高速缓冲器(cache）和相应的指令,当重复执行这些指令时,只需读入一次就可连续使用，不需要再次从程序存储器中读出,从而减少了指令执行作需要的时间。如:TMS320C6200系列的DSP,整个片内程序存储器都可以配制成高速缓冲结构。
    2. **采用多总线结构**
        - DSP芯片都采用多总线结构，可同时进行取指令和多个数据存取操作，并由辅助寄存器自动增减地址进行寻址，使CPU在一个机器周期内可多次对程序空间和数据空间进行访问，大大地提高了DSP的运行速度。
        - 如：TMS320C54x系列内部有P、C、D、E等4组总线，每组总线中都有地址总线和数据总线，这样在一个机器周期内可以完成如下操作:

            ```
            从程序存储器中取一条指令;
            从数据存储器中读两个操作数;
            向数据存储器写一个操作数。
            ```
    3. **采用流水线技术**
        - 每条指令可通过片内多功能单元完成取指、译码、取操作数和执行等多个步骤，实现多条指令的并行执行，从而在不提高系统时钟频率的条件下减少每条指令的执行时间。
            - ![](vx_images/49521120252692.png =500x)
    4. **配有专用的硬件乘法—累加器**
        - 可在一个周期内完成一次乘法和一次累加操作
    5. **具有特殊的DSP指令**
        - 在DSP指令系统中设置完成特定功能指令
    6. **快速指令周期**
    7. **硬件配置强**
    8. **支持多处理器结构**
    9. **省电管理和低功耗**
        - DSP功耗一般为0.5~4W，电池低功耗可实现0.25W

### DSP芯片分类
#### 按基础特性分
- 这种分类是依据DSP芯片的工作时钟和指令类型进行的。可分为 **静态DSP芯片** 和 **一致性DSP芯片** 。
    - 如果DSP芯片在某时钟频率范围内的任何频率上都能正常工作，除计算速度有变化外，没有性能的下降,这类DSP芯片一般称之为静态DSP芯片。
    - 如果有两种或两种以上的DSP芯片，它们的指令集和相应的机器代码及管脚结构相互兼容，则这类DSP芯片被称之为一致性的DSP芯片。

#### 按用途分
- 按照用途,可将DSP芯片分为 **通用型** 和 **专用型** 两大类。
    - 通用型DSP芯片：一般是指可以用指令编程的DSP芯片，适合于普通的DSP应用，具有可编程性和强大的处理能力，可完成复杂的数字信号处理的算法。
    - 专用型DsP芯片：是为特定的DSP运算而设计，通常只针对某一种应用，相应的算法由内部硬件电路实现。适合于数字滤波、FFT、卷积和相关算法等特殊的运算。主要用于要求信号处理速度极快的特殊场合。

#### 按数据格式分
- 根据芯片工作的数据格式，按其精度或动态范围，可将通用DSP划分为 **定点DSP** 和 **浮点DSP** 两类。
    - 若数据以定点格式工作的一一定点DSP芯片。
    - 若数据以浮点格式工作的一—浮点DSP芯片。
    🐖 不同的浮点DSP芯片所采用的浮点格式有所不同，有的DSP芯片采用自定义的浮点格式，有的DSP芯片则采用IEEE的标准浮点格式。

### DSP芯片的应用

### DSP芯片现状和趋势
#### 芯片现状
1. 制造工艺
2. 存储容量
3. 内部结构
4. 运算速度
5. 高集成度化
6. 开发工具

#### 国内芯片发展现状

#### DSP技术的发展趋势

## DSP系统
### DSP系统的构成
- 一个典型的DSP系统应包括抗混叠滤波器、数据采集A/D转换器、数字信号处理器DSP、D/A转换器和低通滤波器等组成。
    ![](vx_images/113754519249666.png =500x)
- DSP系统处理过程
    - 将输入信号xt)进行抗混叠滤波，滤掉高于折叠频率的分量，以防止信号频谱的混叠
    - 经采样和A/D转换器，将滤波后的信号转换为数字信号x(n)
    - 数字信号处理器对x(n)进行处理，得数字信号y(n);
    - 经D/A转换器，将y(n)转换成模拟信号;
    - 经低通滤波器，滤除高频分量，得到平滑的模拟信号y(t)。

### DSP系统特点
- 接口方便
- 编程方便
- 具有高速性
- 稳定性好
- 精度高
- 可重复性好
- 集成方便

### DSP系统设计过程
![](vx_images/334544819247270.png =250x)

### DSP芯片选择
- 通常依据系统的运算速度、运算精度和存储器的需求等来选择DSP芯片
- 选择芯片考虑因素
    - 芯片运算速度
    - 芯片价格
    - 芯片运算精度
        - 运算精度取决于DSP芯片的字长
        - 定点DSP芯片的字长通常为16为和24位
        - 浮点DSP芯片字长一般为32位
            - 🌂 定点和浮点的区别
                - 定点格式，即 **约定机器中所有数据的小数点位置是固定不变的** 。通常将定点数据表示成纯小数或纯整数，为了将数表示成纯小数，通常把小数点固定在数值部分的最高位之前；而为了将数表示成纯整数，则把小数点固定在数值部分的最后面
                - ![](vx_images/113355619244772.png =400x)
                - 浮点数表达方式，这种表达方式利用科学计数法来表达实数，即用一个尾数(Mantissa，尾数有时也称为有效数字，它实际上是有效数字的非正式说法)，一个基数(Base)，一个指数(Exponent)以及一个表示正负的符号来表达实数，比如123.45用十进制科学计数法可以表示为1.2345x102，其中1.2345为尾数，10为基数，2为指数。浮点数利用指数达到了浮动小数点的效果，从而可以灵活地表达更大范围的实数。
    - 芯片硬件资源
        - 片内RAM、ROM的数量，外部可扩展的程序和数据空间,总线接口,1/o接口等
    - 芯片开发工具
    - 芯片功耗
    - 其他因素
        - 选择DSP芯片还应考虑封装的形式、质量标准、供货情况、生命周期等。











